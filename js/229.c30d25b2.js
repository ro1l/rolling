"use strict";(self["webpackChunkrolling"]=self["webpackChunkrolling"]||[]).push([[229],{4238:function(t,o,e){e(7658);var r=e(6154),c=e(9876),a=e(6294);const s=(0,a.Z)();o.Z=(0,c.Q_)("productStore",{state:()=>({products:[],productsPage:[],pagination:{},productsCategory:[],productsType:[],product:{},imageUrl:"",imagesUrl:[],cc:0,lgProducts:[],smProducts:[]}),actions:{async getProducts(){s.isLoadingForStore=!0;const t="https://vue3-course-api.hexschool.io/api/je-api/products/all";try{const o=await r.Z.get(t);s.isLoadingForStore=!1,this.products=o.data.products,this.updateProductsCategoryAndType(),this.scrollToTop()}catch(o){console.error("Error 找不到資料:",o)}},async getProductsPage(t=1){s.isLoadingForStore=!0;const o=`https://vue3-course-api.hexschool.io/api/je-api/admin/products/?page=${t}`;try{const t=await r.Z.get(o);s.isLoadingForStore=!1,t.data.success&&(this.productsPage=t.data.products,this.pagination=t.data.pagination),this.scrollToTop()}catch(e){console.error("Error fetching paginated products:",e)}},async getProduct(t){s.isLoadingForStore=!0;const o=`https://vue3-course-api.hexschool.io/api/je-api/product/${t}`;try{const t=await r.Z.get(o);s.isLoadingForStore=!1,this.product=t.data.product,this.imageUrl=t.data.product.imageUrl,this.imagesUrl=t.data.product.imagesUrl,this.cc=t.data.product.content.comparison.cc,this.scrollToTop()}catch(e){console.error("Error 找不到資料",e)}this.licenseTax(),this.fuelTax()},licenseTax(t){const o=t;return o<=500?1620:o<=600?2160:o<=1200?4320:o<=1800?7120:11230},fuelTax(t){const o=t;return o<=500?900:o<=600?1200:o<=1200?1800:2010},setLgCompProd(t){this.updateProductArray(this.lgProducts,t,4)},setSmCompProd(t){this.updateProductArray(this.smProducts,t,2)},updateProductArray(t,o,e){t.length<e?t.some((t=>t.id===o.id))||t.push(o):t.some((t=>t.id===o.id))||(t.shift(),t.push(o))},updateProductsCategoryAndType(){this.products.forEach((t=>{this.productsCategory.includes(t.category)||this.productsCategory.push(t.category),this.productsType.includes(t.content.comparison.type)||this.productsType.push(t.content.comparison.type)}))},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}})},6294:function(t,o,e){var r=e(9876);o.Z=(0,r.Q_)("statusStore",{state:()=>({isLoadingForStore:!1,cartLoadingItem:""})})},229:function(t,o,e){e.r(o),e.d(o,{default:function(){return T}});var r=e(6252),c=e(9963),a=e(3577);const s={class:"search-box"},i={class:"title"},d=(0,r._)("h1",null,"搜尋",-1),u=(0,r._)("i",{class:"bi bi-x text-deep"},null,-1),n=[u],h={class:"search border-box"},p={class:"search-bar"},l={key:0},g=["checked","onClick"],P={key:1};function y(t,o,e,u,y,S){return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",i,[d,(0,r._)("button",{onClick:o[0]||(o[0]=(0,c.iM)(((...t)=>S.goBack&&S.goBack(...t)),["prevent"])),type:"button"},n)]),(0,r._)("div",h,[(0,r._)("div",p,[(0,r.wy)((0,r._)("input",{class:"border-box",type:"text",id:"search",placeholder:"請輸入車款","onUpdate:modelValue":o[1]||(o[1]=t=>y.cacheProductsSearch=t)},null,512),[[c.nr,y.cacheProductsSearch]]),!y.cacheProductsSearch.length<1?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"text-deep",onClick:o[2]||(o[2]=(0,c.iM)(((...t)=>S.delCacheProductSearch&&S.delCacheProductSearch(...t)),["prevent"])),type:"button"}," 移除 ")):(0,r.kq)("",!0)]),y.cacheProductsSearch?((0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(S.filterProductsSearch.splice(0,3),((t,o)=>((0,r.wg)(),(0,r.iD)("label",{key:t+o},[(0,r._)("p",null,(0,a.zw)(t.title),1),(0,r._)("input",{type:"radio",checked:y.cacheProductArea.title===t.title,onClick:(0,c.iM)((o=>S.getProduct(t.id)),["prevent"])},null,8,g)])))),128))])):(0,r.kq)("",!0),y.notFoundData?((0,r.wg)(),(0,r.iD)("p",P,"未找到符合的項目")):(0,r.kq)("",!0)])])}e(7658);var S=e(9876),m=e(4238),k={data(){return{cacheProductsSearch:"",cacheProductArea:"",notFoundData:!1}},computed:{...(0,S.rn)(m.Z,["products"]),filterProductsSearch(){const t=new RegExp(this.cacheProductsSearch,"i");return this.products.filter((o=>o.title.match(t)))}},methods:{...(0,S.nv)(m.Z,["getProducts"]),removeFilterSearch(t){this.cacheProductArea=t,this.cacheProductsSearch=""},delCacheProductSearch(){this.cacheProductsSearch=""},getProduct(t){this.$router.push(`/product/${t}`)},goBack(){return this.$router.go(-1)},updateNotFoundData(){const t=new RegExp(this.cacheProductsSearch,"i");this.notFoundData=0===this.products.filter((o=>o.title.match(t))).length}},watch:{cacheProductsSearch:"updateNotFoundData"},created(){this.getProducts()}},v=e(3744);const w=(0,v.Z)(k,[["render",y]]);var T=w}}]);
//# sourceMappingURL=229.c30d25b2.js.map